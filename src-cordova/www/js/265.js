(self["webpackChunkmimopetapp"]=self["webpackChunkmimopetapp"]||[]).push([[265],{265:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>P});var o=s(3673),r=s(2323);const n=(0,o.HX)("data-v-0545af7e");(0,o.dD)("data-v-0545af7e");const i={key:0,class:"token-wrapper"},a={class:"token-wrapper__header"},l={class:"token-wrapper__body"},u={class:"content"},c={class:"content__title"},p=(0,o.Wm)("p",{class:"content__description"},"Verifique sua identidade inserindo o código enviado",-1),d={class:"input-token row q-gutter-sm"},m={key:0,class:"error-wrapper text-negative"},h={class:"token-wrapper__footer"},g={key:1};(0,o.Cn)();const T=n(((e,t,s,n,T,v)=>{const k=(0,o.up)("q-img"),b=(0,o.up)("TextField"),C=(0,o.up)("Button"),w=(0,o.up)("Response");return(0,o.wg)(),(0,o.j4)("div",null,[e.response.status?((0,o.wg)(),(0,o.j4)("div",g,[(0,o.Wm)(w,{title:e.response.title,subtitle:e.response.subtitle,buttonText:e.response.buttonText,subButtonText:e.response.subButtonText,icon:e.response.icon,action:e.response.action,subAction:e.response.subAction},null,8,["title","subtitle","buttonText","subButtonText","icon","action","subAction"])])):((0,o.wg)(),(0,o.j4)("div",i,[(0,o.Wm)("div",a,[(0,o.Wm)(k,{src:e.getCheckSuccess,class:"slide-step__image",fit:"scale-down",height:"100%"},null,8,["src"])]),(0,o.Wm)("div",l,[(0,o.Wm)("div",u,[(0,o.Wm)("h2",c,"Enviamos uma mensagem para "+(0,r.zw)(e.recipient),1),p]),(0,o.Wm)("div",d,[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(e.inputTextFields,((t,s)=>((0,o.wg)(),(0,o.j4)("div",{class:"col-2",key:s},[(0,o.Wm)(b,{ref:"inputText",type:"text",modelValue:e.inputTextFields[s].value,"onUpdate:modelValue":t=>e.inputTextFields[s].value=t,label:e.inputTextPlaceholder,hint:"","no-error-icon":"","lazy-rules":"",class:"input-custom",maxlength:"1",onKeypress:e.onlyNumber,error:e.inputTextFields[s].error},null,8,["modelValue","onUpdate:modelValue","label","onKeypress","error"])])))),128))]),e.errorMessage?((0,o.wg)(),(0,o.j4)("div",m,[(0,o.Wm)("p",null,(0,r.zw)(e.errorMessage),1)])):(0,o.kq)("",!0)]),(0,o.Wm)("div",h,[(0,o.Wm)(C,{color:"primary-filled",class:"no-shadow text-weight-bold",size:"md","no-caps":"",label:"Confirmar",onClick:e.onClick},null,8,["onClick"])])]))])}));var v=s(515),k=s.n(v),b=(s(7280),s(5363),s(107),s(6548)),C=s(5358),w=s(8536),x=s(7874);const f=s(6263),y=s(7407),F={name:"Token",components:{Button:b.Z,TextField:C.Z,Response:w.Z},props:{recipient:{type:String,default:""}},data(){return{inputTextFields:[{value:"",label:"-",error:!1},{value:"",label:"-",error:!1},{value:"",label:"-",error:!1},{value:"",label:"-",error:!1}],inputTextPlaceholder:"-",errorMessage:"",response:{status:!1,title:"",subtitle:"",buttonText:"",action:()=>{},subAction:()=>{},icon:null}}},computed:k()(k()({},(0,x.Se)("auth",["getSendToken","getRecoverSendToken"])),{},{getCheckSuccess(){return f}}),methods:k()(k()({},(0,x.nv)("auth",["ActionConfirmToken","ActionRecoverConfirmToken"])),{},{formatInput(e,t){this.inputTextFields[t].value=e.target._value.replace(/[^0-9]/g,"")},getCode(){return this.inputTextFields.reduce(((e,t)=>e+t.value),"")},onlyNumber(e){const t=e.keyCode?e.keyCode:e.which;(t<48||t>57)&&e.preventDefault()},isFieldEmpty(){let e=!1;return this.inputTextFields.forEach((t=>{t.value||(t.error=!0,e=!0)})),e},async onClick(){if(this.isFieldEmpty())this.errorMessage="Preencha todos os campos!";else{this.errorMessage="";const e=await this.confirmToken();e?this.isFromCreateUser()?this.setCreateAccountSuccess():this.goToChangePassword():this.errorMessage="error"}},isFromCreateUser(){return this.$route.params.from.includes("criar")},showChangePassword(){},async confirmToken(){const e={code:this.getCode()};let t;return this.isFromCreateUser()?(e.email=this.getSendToken.email,t=await this.ActionConfirmToken(e)):(e.email=this.getRecoverSendToken.email,t=await this.ActionRecoverConfirmToken(e)),t},setCreateAccountSuccess(){this.response={status:!0,title:"Conta criada com sucesso",subtitle:"Adicione o perfil de seus pets para começar a utilzar os treinos",subButtonText:"Criar perfil do pet",buttonText:"Acessar minha página",subAction:()=>{this.goToPetRegister()},action:()=>{this.goToHome()},icon:y}},goToPetRegister(){this.$router.push({name:"PetRegister"})},goToHome(){this.$router.push({name:"home"})},goToChangePassword(){this.$router.push({name:"ChangePassword"})}})};var _=s(4027),A=s(7518),W=s.n(A);F.render=T,F.__scopeId="data-v-0545af7e";const P=F;W()(F,"components",{QImg:_.Z})},7407:(e,t,s)=>{e.exports=s.p+"img/star.svg"}}]);