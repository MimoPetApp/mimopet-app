(self["webpackChunkmimopetapp"]=self["webpackChunkmimopetapp"]||[]).push([[63],{7063:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>H});var r=a(3673);const l={class:"pt-2"},i={class:"pr-5 pl-5"},s={class:"row items-center justify-end"},n={key:1,class:"flex flex-center q-mt-xl"};function o(e,t,a,o,d,m){const c=(0,r.up)("q-btn"),u=(0,r.up)("q-toolbar"),p=(0,r.up)("Button"),b=(0,r.up)("Ask"),h=(0,r.up)("TextField"),w=(0,r.up)("q-date"),g=(0,r.up)("q-popup-proxy"),f=(0,r.up)("q-icon"),y=(0,r.up)("q-input"),k=(0,r.up)("Button-Checkbox-Group"),C=(0,r.up)("AuthContainer"),v=(0,r.up)("LoadingCircle"),$=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.j4)("div",null,[e.loading?((0,r.wg)(),(0,r.j4)("div",n,[(0,r.Wm)(v,{color:"status-waiting",size:"6em",thickness:5})])):((0,r.wg)(),(0,r.j4)(C,{key:0,light:""},{default:(0,r.w5)((()=>[(0,r.Wm)("div",null,[(0,r.Wm)(u,{class:"text-primary"},{default:(0,r.w5)((()=>[(0,r.Wm)("div",l,[(0,r.Wm)(c,{flat:"",round:"",color:"utilities-alternate",size:"md",icon:"arrow_back",onClick:e.previousStep},null,8,["onClick"])])])),_:1}),1==e.step?((0,r.wg)(),(0,r.j4)(b,{key:0,title:e.$t("create.terms.title"),"align-content":"center"},{content:(0,r.w5)((()=>[(0,r.Wm)("div",i,[(0,r.Wm)("p",{innerHTML:e.terms.terms,class:"text-weight-bold"},null,8,["innerHTML"])])])),action:(0,r.w5)((()=>[(0,r.Wm)(p,{type:"submit",label:e.$t("create.terms.mainbutton"),loading:!1,onClick:e.nextStep,noCaps:"",color:"primary-filled",class:"main-button no-shadow"},null,8,["label","onClick"])])),_:1},8,["title"])):2==e.step?((0,r.wg)(),(0,r.j4)(b,{key:1,title:e.$t("create.email.title"),subtitle:e.$t("create.email.subtitle"),"align-content":"center"},{content:(0,r.w5)((()=>[(0,r.Wm)(h,{modelValue:e.form.email,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.email=t),ref:"email",borderless:"",light:"",type:"email",align:"center",label:e.$t("create.email.label"),rules:[t=>!!t||e.$t("login.email.error")],hint:"","no-error-icon":"","lazy-rules":"",error:e.showError.email&&!e.emailIsValid,"error-message":e.$t("create.email.error"),onFocus:t[2]||(t[2]=t=>e.showError.email=!0)},null,8,["modelValue","label","rules","error","error-message"])])),action:(0,r.w5)((()=>[(0,r.Wm)(p,{onClick:e.onSubmitEmail,label:e.$t("create.email.mainbutton"),noCaps:"",type:"submit",color:"primary-filled",class:"main-button no-shadow",loading:!1,disabled:!e.emailIsValid},null,8,["onClick","label","disabled"])])),_:1},8,["title","subtitle"])):3==e.step?((0,r.wg)(),(0,r.j4)(b,{key:2,title:e.$t("create.password.title"),subtitle:e.$t("create.password.subtitle")},{content:(0,r.w5)((()=>[(0,r.Wm)(h,{modelValue:e.form.password,"onUpdate:modelValue":t[3]||(t[3]=t=>e.form.password=t),ref:"password",borderless:"",light:"",type:"text",align:"center",label:e.$t("create.password.label"),rules:e.showError.password?[t=>!!t||e.$t("create.password.error.required"),t=>/^(?=.*[a-z])/.test(t)||e.$t("create.password.error.lowercase"),t=>/^(?=.*[A-Z])/.test(t)||e.$t("create.password.error.uppercase"),t=>/^(?=.*[0-9])/.test(t)||e.$t("create.password.error.number"),t=>/^(?=.*[!@#\$%\^&\*])/.test(t)||e.$t("create.password.error.specialCharacter"),t=>/^(?=.{8,})/.test(t)||e.$t("create.password.error.length")]:[],hint:"","no-error-icon":"",error:e.showError.password&&!e.passwordIsValid,onFocus:t[4]||(t[4]=t=>e.showError.password=!0)},null,8,["modelValue","label","rules","error"])])),action:(0,r.w5)((()=>[(0,r.Wm)(p,{onClick:e.onSubmitPassword,label:e.$t("create.password.mainbutton"),noCaps:"",type:"submit",color:"primary-filled",class:"main-button no-shadow",loading:!1,disabled:!e.passwordIsValid},null,8,["onClick","label","disabled"])])),_:1},8,["title","subtitle"])):4==e.step?((0,r.wg)(),(0,r.j4)(b,{key:3,title:e.$t("create.name.title"),subtitle:e.$t("create.name.subtitle")},{content:(0,r.w5)((()=>[(0,r.Wm)(h,{modelValue:e.form.username,"onUpdate:modelValue":t[5]||(t[5]=t=>e.form.username=t),ref:"user_name",borderless:"",light:"",type:"text",align:"center",label:e.$t("create.name.label"),hint:"","no-error-icon":""},null,8,["modelValue","label"])])),action:(0,r.w5)((()=>[(0,r.Wm)(p,{onClick:e.onSubmitName,label:e.$t("create.name.mainbutton"),noCaps:"",type:"submit",color:"primary-filled",class:"main-button no-shadow",loading:!1,disabled:!e.nameIsValid},null,8,["onClick","label","disabled"])])),_:1},8,["title","subtitle"])):5==e.step?((0,r.wg)(),(0,r.j4)(b,{key:4,title:e.$t("create.birthDate.title"),subtitle:e.$t("create.birthDate.subtitle")},{content:(0,r.w5)((()=>[(0,r.Wm)(y,{modelValue:e.form.birthday,"onUpdate:modelValue":t[7]||(t[7]=t=>e.form.birthday=t),borderless:"","input-class":"single-line-input-pattern",class:"single-input",mask:"##-##-####","no-error-icon":"",rules:[t=>10==t.length||e.$t("create.birthDate.error"),()=>e.userAge>=18||"Tem que ser maior de idade"]},{append:(0,r.w5)((()=>[(0,r.Wm)(f,{name:"event",class:"cursor-pointer"},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{modelValue:e.form.birthday,"onUpdate:modelValue":t[6]||(t[6]=t=>e.form.birthday=t),mask:"DD-MM-YYYY"},{default:(0,r.w5)((()=>[(0,r.Wm)("div",s,[(0,r.wy)((0,r.Wm)(c,{label:"Close",color:"primary",flat:""},null,512),[[$]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue","rules"])])),action:(0,r.w5)((()=>[(0,r.Wm)(p,{onClick:e.onSubmitBirthDate,label:e.$t("create.birthDate.mainbutton"),noCaps:"",type:"submit",color:"primary-filled",class:"main-button no-shadow",disabled:!e.birthdayIsValid},null,8,["onClick","label","disabled"])])),_:1},8,["title","subtitle"])):6==e.step?((0,r.wg)(),(0,r.j4)(b,{key:5,title:e.$t("create.identification.title"),subtitle:e.$t("create.identification.subtitle")},{content:(0,r.w5)((()=>[(0,r.Wm)(k,{options:e.genderOptions,selectionType:"single",onSelected:t[8]||(t[8]=t=>e.genderOptionsHandler("gender",t))},null,8,["options"])])),action:(0,r.w5)((()=>[(0,r.Wm)(p,{onClick:e.onSubmitGender,label:e.$t("create.identification.mainbutton"),noCaps:"",type:"submit",color:"primary-filled",class:"main-button no-shadow"},null,8,["onClick","label"])])),_:1},8,["title","subtitle"])):(0,r.kq)("",!0)])])),_:1}))])}var d=a(515),m=a.n(d),c=(a(71),a(7280),a(7874)),u=a(2445),p=a(2323);const b=(0,r.HX)("data-v-3b166145");(0,r.dD)("data-v-3b166145");const h={class:"ask-wrapper"},w={class:"ask-wrapper__header"},g={class:"row"},f={class:"col-12 col-md-12 col-xs-12"},y={class:"text-main-alternate"},k={key:0,class:"text-main-alternate-light"},C={class:"row"},v={class:"col-12 col-md-12 col-xs-12"},$={class:"ask-wrapper__footer"},W={class:"row"},x={class:"col-12 col-md-12 col-xs-12 flex items-center justify-center"};(0,r.Cn)();const V=b(((e,t,a,l,i,s)=>((0,r.wg)(),(0,r.j4)("div",h,[(0,r.Wm)("div",w,[(0,r.Wm)("div",g,[(0,r.Wm)("div",f,[(0,r.Wm)("h2",y,(0,p.zw)(a.title),1),a.subtitle?((0,r.wg)(),(0,r.j4)("p",k,(0,p.zw)(a.subtitle),1)):(0,r.kq)("",!0)])])]),(0,r.Wm)("div",{class:["ask-wrapper__content",s.selectAlignContent]},[(0,r.Wm)("div",C,[(0,r.Wm)("div",v,[(0,r.WI)(e.$slots,"content",{},void 0,!0)])])],2),(0,r.Wm)("div",$,[(0,r.Wm)("div",W,[(0,r.Wm)("div",x,[(0,r.WI)(e.$slots,"action",{},void 0,!0)])])])])))),_={name:"Ask",props:{color:{type:String,default:"main-primary",validate:e=>-1!==["main-primary"].indexOf(e)},type:{type:String,default:"squared",validate:e=>-1!==["rounded","squared"].indexOf(e)},selected:{type:Boolean,default:!1,validate:e=>-1!==[!0,!1].indexOf(e)},title:{type:String,default:"Insert your title"},subtitle:{type:String},alignContent:{type:String,default:"center",validate:e=>-1!==["start","center","end"].indexOf(e)}},computed:{selectAlignContent(){switch(this.alignContent){case"start":return"ask-wrapper__content--align-start";case"end":return"ask-wrapper__content--align-end";default:return"ask-wrapper__content--align-center"}}}};_.render=V,_.__scopeId="data-v-3b166145";const S=_;var A=a(9836),I=a(6548),Z=a(5358),q=a(4252),j=a(2034);const D={name:"CreateAccount",components:{AuthContainer:u.Z,LoadingCircle:A.Z,Ask:S,Button:I.Z,TextField:Z.Z,ButtonCheckboxGroup:q.Z},data(){return{showError:{email:!1,password:!1},form:{username:"",email:"",password:"",gender:"",birthday:""},pattern:{email:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,password:/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/,name:/^(?=.{3,})/},genderOptions:[{label:"Mãe de pet",value:"FEMALE",isCorrect:!1},{label:"Pai de pet",value:"MALE",isCorrect:!1},{label:"Não binário",value:"NONBINARY",isCorrect:!1}],step:1,maxStep:7,loading:!1}},computed:m()(m()(m()({},(0,c.rn)("auth",["terms"])),(0,c.Se)("auth",["getSendToken"])),{},{emailIsValid(){return this.validateField(this.form.email,this.pattern.email)},passwordIsValid(){return this.validateField(this.form.password,this.pattern.password)},nameIsValid(){return this.validateField(this.form.username,this.pattern.name)},genderIsValid(){return""!==this.form.gender},birthdayIsValid(){return 10===this.form.birthday.length&&this.userAge>=18},userAge(){if(10===this.form.birthday.length){const[e,t,a]=this.form.birthday.split("-");return this._calculateAge(new Date(a,t,e))}return 0}}),beforeMount(){},async mounted(){await this.ActionGetTermsOfUse()},methods:m()(m()(m()({},j.Z),(0,c.nv)("auth",["ActionGetTermsOfUse","ActionCreateAccount","ActionSendToken"])),{},{nextStep(){this.step<this.maxStep&&(this.step+=1)},previousStep(){this.step>1?this.step-=1:this.hubHandler()},hubHandler(){this.$router.push({name:"hub"})},genderOptionsHandler(e,t){"gender"===e&&(this.form.gender=t[0].value)},validateField(e,t){return!(!e||!t)&&t.test(e)},onSubmitEmail(){this.emailIsValid&&this.nextStep()},onSubmitPassword(){this.passwordIsValid&&this.nextStep()},onSubmitName(){this.nameIsValid&&this.nextStep()},onSubmitBirthDate(){this.birthdayIsValid&&this.nextStep()},async onSubmitGender(){this.genderIsValid&&await this.submitNewUser()},async submitNewUser(){this.loading=!0,this.form.birthday=this._noMask(this.form.birthday);const e=await this.ActionCreateAccount(this.form);e&&this.$router.push({name:"TokenConfirm",params:{from:"criar"}}),this.loading=!1}})};var T=a(9570),E=a(8240),O=a(8104),z=a(4554),B=a(9108),F=a(5836),M=a(677),U=a(7518),N=a.n(U);D.render=o;const H=D;N()(D,"components",{QToolbar:T.Z,QBtn:E.Z,QInput:O.Z,QIcon:z.Z,QPopupProxy:B.Z,QDate:F.Z}),N()(D,"directives",{ClosePopup:M.Z})}}]);