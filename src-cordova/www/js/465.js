(self["webpackChunkmimopetapp"]=self["webpackChunkmimopetapp"]||[]).push([[465],{5790:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>O});var i=a(3673),o=a(8880);const s={style:{background:"#ffffff"}},r={class:"q-gutter-xs pr-4 pl-4"},n={class:"row mt-3",style:{"margin-bottom":"18px"}},l={class:"col-12 col-md-12 col-xs-12 list-breeds-wrapper"},d={key:1,class:"flex flex-center q-mt-xl"};function c(e,t,a,c,m,p){const u=(0,i.up)("q-btn"),h=(0,i.up)("q-toolbar"),b=(0,i.up)("TextField"),f=(0,i.up)("Button"),g=(0,i.up)("Ask"),k=(0,i.up)("Button-Checkbox-Group"),w=(0,i.up)("SearchField"),y=(0,i.up)("Checkbox"),B=(0,i.up)("FeedbackModal"),C=(0,i.up)("q-layout"),S=(0,i.up)("LoadingCircle");return(0,i.wg)(),(0,i.j4)("div",s,[e.loading?((0,i.wg)(),(0,i.j4)("div",d,[(0,i.Wm)(S,{color:"status-waiting",size:"6em",thickness:5})])):((0,i.wg)(),(0,i.j4)(C,{key:0,view:"lHh Lpr lFf"},{default:(0,i.w5)((()=>[5!==e.step?((0,i.wg)(),(0,i.j4)(h,{key:0,class:"text-primary text-main-primary"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{flat:"",round:"",dense:"",icon:"arrow_back",onClick:t[1]||(t[1]=t=>e.backStep()),"text-color":"utilities-alternate"})])),_:1})):(0,i.kq)("",!0),(0,i.wy)((0,i.Wm)(g,{title:"Como seu pet se chama?",subtitle:"Vamos construir o perfil do seu animal 🐶","align-content":"center"},{content:(0,i.w5)((()=>[(0,i.Wm)(b,{modelValue:e.form.petName,"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.petName=t),light:"",align:"center",class:"mb-1",type:"text",label:"Insira o nome do pet"},null,8,["modelValue"])])),action:(0,i.w5)((()=>[(0,i.Wm)(f,{label:"Continuar",noCaps:"",color:"primary-filled",class:"pl-7 pr-7",disabled:0===e.form.petName.length,onClick:t[3]||(t[3]=t=>e.nextStep())},null,8,["disabled"])])),_:1},512),[[o.F8,1===e.step]]),(0,i.wy)((0,i.Wm)(g,{title:"Qual a idade do seu pet?",subtitle:"Estamos acabando de construir o seu perfil de tutor treinador","align-content":"center"},{content:(0,i.w5)((()=>[(0,i.Wm)(k,{options:e.ageOptions,selectionType:"single",onSelected:t[4]||(t[4]=t=>e.selectedHandler("petAge",t))},null,8,["options"])])),action:(0,i.w5)((()=>[(0,i.Wm)(f,{label:"Continuar",noCaps:"",color:"primary-filled",class:"pl-7 pr-7",disabled:!e.petAgeFilled,onClick:t[5]||(t[5]=t=>e.nextStep())},null,8,["disabled"])])),_:1},512),[[o.F8,2===e.step]]),(0,i.wy)((0,i.Wm)(g,{title:"Qual a raça do pet?",subtitle:"Estamos acabando de construir o seu perfil de tutor treinador","align-content":"start"},{content:(0,i.w5)((()=>[(0,i.Wm)("div",r,[(0,i.Wm)(w,{modelValue:e.form.petBreed.searchName,"onUpdate:modelValue":[t[6]||(t[6]=t=>e.form.petBreed.searchName=t),t[7]||(t[7]=t=>e.searchBreed())],label:"Busque por nome",class:"mb-1",align:"right",outline:"",disable:e.form.petBreed.isUnknown},null,8,["modelValue","disable"]),(0,i.Wm)(y,{modelValue:e.form.petBreed.isUnknown,"onUpdate:modelValue":t[8]||(t[8]=t=>e.form.petBreed.isUnknown=t),label:"Sem raça",onClick:t[9]||(t[9]=t=>e.noBreedHandler())},null,8,["modelValue"])]),(0,i.Wm)("div",n,[(0,i.Wm)("div",l,[(0,i.Wm)(k,{options:e.breedsList,selectionType:"single",onSelected:t[10]||(t[10]=t=>e.selectedHandler("petBreed",t))},null,8,["options"])])])])),action:(0,i.w5)((()=>[(0,i.Wm)(f,{label:"Continuar",noCaps:"",color:"primary-filled",class:"pl-7 pr-7",disabled:!e.petBreedFilled,onClick:t[11]||(t[11]=t=>e.nextStep())},null,8,["disabled"])])),_:1},512),[[o.F8,3===e.step]]),(0,i.wy)((0,i.Wm)(g,{title:"Informe detalhes do pet",subtitle:"Queremos entender mais do seu animal","align-content":"center"},{content:(0,i.w5)((()=>[(0,i.Wm)(k,{options:e.detailOptions,selectionType:"multi",onSelected:t[12]||(t[12]=t=>e.selectedHandler("petDetails",t))},null,8,["options"])])),action:(0,i.w5)((()=>[(0,i.Wm)(f,{label:"Continuar",noCaps:"",color:"primary-filled",class:"pl-7 pr-7",disabled:!e.petDetailsFilled,onClick:t[13]||(t[13]=t=>e.registerPet())},null,8,["disabled"])])),_:1},512),[[o.F8,4===e.step]]),(0,i.Wm)(B,{active:e.feedbackModal.status,icon:e.feedbackModal.icon,title:e.feedbackModal.title,subtitle:e.feedbackModal.subtitle,buttonText:e.feedbackModal.buttonText,action:e.feedbackModal.action},null,8,["active","icon","title","subtitle","buttonText","action"])])),_:1}))])}var m=a(515),p=a.n(m),u=a(7874),h=a(170),b=a(6211),f=a(4252),g=a(2323);const k={class:"mimo-text main-button__text mimo-text--white"};function w(e,t,a,o,s,r){const n=(0,i.up)("q-btn");return(0,i.wg)(),(0,i.j4)(n,{to:a.to,type:a.type,color:"main-primary",class:"main-button no-shadow",loading:a.loading,disable:a.disable,onClick:a.click},{default:(0,i.w5)((()=>[(0,i.Wm)("span",k,(0,g.zw)(a.label),1)])),_:1},8,["to","type","loading","disable","onClick"])}const y={name:"MainButton",props:{to:{type:String,default:""},label:{type:String,default:""},type:{type:String,default:"button"},click:{type:Function,default:()=>{}},loading:{type:Boolean,default:!1},disable:{type:Boolean,default:!1}},data(){return{}}};var B=a(8240),C=a(7518),S=a.n(C);y.render=w;const A=y;S()(y,"components",{QBtn:B.Z});var x=a(2445),F=a(9836),D=a(5955),M=a(5284),P=a(7580),N=a(8112),W=a(8785);const v=a(35),Z={name:"PetRegister",components:{Title:h.Z,Button:b.Z,Ask:D.Z,MainButton:A,AuthContainer:x.Z,LoadingCircle:F.Z,ButtonCheckboxGroup:f.Z,TextField:M.Z,SearchField:P.Z,Checkbox:N.ZP,FeedbackModal:W.Z},data(){return{ageOptions:[{label:"Filhote até 6 meses",isCorrect:!1},{label:"Filhote até 1,5 anos",isCorrect:!1},{label:"Adulto",isCorrect:!1},{label:"Sênior",isCorrect:!1}],detailOptions:[{label:"Adotado",isCorrect:!1},{label:"Castrado",isCorrect:!1},{label:"Com deficiência",isCorrect:!1},{label:"De serviço",isCorrect:!1},{label:"Nenhum",isCorrect:!1}],form:{petName:"",petAge:null,petBreed:{isUnknown:!1,name:"",searchName:""},petDetails:null},createdPet:null,step:1,loading:!1,formHasError:[!1,!1],btnDisabled:!0,breedsList:[],feedbackModal:{status:!1,icon:v,title:"Pet Adicionado",subtitle:"Você pode adicionar inúmeros pets a sua conta cadastrada",buttonText:"Voltar",action:()=>{this.hideFeedbackModal(),this.goToHome()}}}},computed:p()(p()(p()({},(0,u.rn)("petRegister",{breedsData:"breeds",registerPetData:"registerPet"})),(0,u.rn)("auth",["user"])),{},{feedbackIcon(){return v},petAgeFilled(){return!!this.form.petAge},petBreedFilled(){return!(!this.form.petBreed.name&&!this.form.petBreed.isUnknown)},petDetailsFilled(){return!!this.form.petDetails}}),beforeMount(){},mounted(){this.ActionSetHomeMenuVisibility(!1)},beforeRouteLeave(e,t,a){this.ActionSetHomeMenuVisibility(!0),a()},methods:p()(p()(p()({},(0,u.nv)("pets",["ActionSetHomeMenuVisibility","ActionCreatePet","ActionUpdateMainPet"])),(0,u.nv)("petRegister",["ActionGetBreeds","ActionRegisterPet"])),{},{searchBreed(){let e=[];const t=this;this.form.petBreed.searchName?(e=this.breedsData.data.filter((function(e){return e.breed.toUpperCase().includes(t.form.petBreed.searchName.toUpperCase())})),this.formatBreedList(e)):(this.breedsList=[],this.formatBreedList(this.breedsData.data))},formatBreedList(e){let t=[];e.length>0&&(t=e.map((function(e){return{label:e.breed,selected:!1}}))),this.breedsList=t},noBreedHandler(){this.form.petBreed.isUnknown?(this.form.petBreed.searchName="",this.form.petBreed.name="Sem raça",this.breedsList=[]):(this.form.petBreed.name="",this.formatBreedList(this.breedsData.data))},goToHome(){this.$router.push({name:"home"})},async nextStep(){this.step++},async registerPet(){const e=this.formatForm();if(await this.ActionRegisterPet(e),this.registerPetData.error);else{const e=await this.ActionUpdateMainPet(this.registerPetData.data.id);e&&this.showFeedbackModal()}},formatForm(){let e=JSON.parse(JSON.stringify(this.form));return e={name:e.petName,breed:e.petBreed.name,age:this.mapAge(e.petAge.label),gender:"male",type:"canine",is_adopted:this.isDetailIncluded("Adotado"),is_neutered:this.isDetailIncluded("Castrado"),is_deficiency:this.isDetailIncluded("Com deficiência"),is_service:this.isDetailIncluded("De serviço"),is_none:this.isDetailIncluded("Nenhum")},e},isDetailIncluded(e){if(this.form.petDetails)return this.form.petDetails.some((t=>t.label.includes(e)))},mapAge(e){switch(e){case"Filhote até 6 meses":return"SIX_MONTS";case"Filhote até 1,5 anos":return"EIGHTEEN_MONTS";case"Adulto":return"ADULT";default:return"SENIOR"}},backStep(){this.step>1?this.step--:this.$router.push({name:"home"})},async onSubmit(){const e={name:this.form.petName,gender:this.form.petGender,profilePet:this.parseProfilePet(this.form.petProfile),birthdate:`${this.form.year}-${this.form.month}-${this.form.day}`,breed:this.form.petBreed.isUnknown?"unknown":this.form.petBreed.name,details:this.form.petDetails,togetherBy:Number(this.form.howLong)};this.loading=!0;const t=await this.ActionCreatePet(e);t&&(this.createdPet=t,this.nextStep()),this.loading=!1},finishRegister(){this.$router.push({name:"petdetails",params:{id:`${this.createdPet.id}`}})},selectedHandler(e,t){t.length>0?("petBreed"!==e&&(this.form[e]=[]),"petAge"===e?this.form[e]=t[0]:"petBreed"===e?this.form[e].name=t[0].label:this.form[e]=t):this.form[e]=null},hideFeedbackModal(){this.feedbackModal.status=!1},showFeedbackModal(){this.feedbackModal.status=!0},getSubTitle(){let e;e=this.isUserPremium()?"Você pode adicionar inúmeros pets a sua conta cadastrada":"Você pode adicionar apenas um pet a sua conta cadastrada",this.feedbackModal.subtitle=e},isUserPremium(){return this.user.is_premium}}),async created(){await this.ActionGetBreeds(),this.getSubTitle(),this.formatBreedList(this.breedsData.data)}};var L=a(9214),T=a(9570),_=a(7011),U=a(3414),V=a(2035),I=a(2350),H=a(5869),Q=a(6489);Z.render=c;const O=Z;S()(Z,"components",{QLayout:L.Z,QToolbar:T.Z,QBtn:B.Z,QList:_.Z,QItem:U.Z,QItemSection:V.Z,QItemLabel:I.Z,QSeparator:H.Z}),S()(Z,"directives",{Ripple:Q.Z})}}]);